<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•™ìƒ ì„±ì¥ ë¶„ì„ ë° 3í•™ë…„ í™œë™ ì œì–¸ ìµœì¢… ë³´ê³ ì„œ v17</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <style>
        :root { --blue: #1e40af; --light-blue: #eff6ff; --border: #cbd5e1; --text: #1e293b; }
        body { font-family: 'Pretendard', sans-serif; background: #f1f5f9; color: var(--text); padding: 40px 20px; margin: 0; line-height: 1.6; }
        .wrap { max-width: 900px; margin: 0 auto; }
        
        /* ì…ë ¥ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .input-card { background: white; border-radius: 12px; padding: 30px; margin-bottom: 30px; border: 1px solid var(--border); box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .upload-zone { border: 2px dashed #94a3b8; border-radius: 10px; padding: 30px; text-align: center; cursor: pointer; background: #f8fafc; margin: 15px 0; }
        input, textarea { width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; margin-bottom: 12px; box-sizing: border-box; font-size: 14px; font-family: inherit; }
        .btn-main { width: 100%; padding: 20px; background: var(--blue); color: white; border: none; border-radius: 10px; font-weight: 700; cursor: pointer; font-size: 1.2rem; }
        label { font-size: 12px; color: #64748b; font-weight: 700; margin-bottom: 5px; display: block; }

        /* ì „ë¬¸ ë³´ê³ ì„œ ì–‘ì‹ (White Academic Style) */
        .report-view { background: white; padding: 80px 60px; border: 1px solid var(--border); min-height: 1000px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); display: none; }
        .report-header { border-bottom: 3px solid var(--blue); padding-bottom: 25px; margin-bottom: 40px; text-align: center; }
        .report-header h1 { margin: 0; font-size: 1.8rem; color: var(--blue); font-weight: 900; }
        
        .keyword-container { text-align: center; margin: 30px 0; padding: 20px; border-radius: 12px; background: #fafafa; border: 1px solid var(--light-blue); }
        .k-badge { display: inline-block; padding: 8px 18px; background: var(--light-blue); border: 1px solid var(--blue); color: var(--blue); border-radius: 30px; font-weight: 800; font-size: 0.9rem; margin: 6px; }

        .section-title { font-size: 1.4rem; font-weight: 900; color: var(--blue); margin: 50px 0 20px; border-bottom: 2px solid #e2e8f0; padding-bottom: 10px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 30px; table-layout: fixed; }
        th, td { border: 1px solid #cbd5e1; padding: 15px; text-align: left; vertical-align: top; font-size: 13.5px; }
        th { background: #f8fafc; color: var(--blue); font-weight: 800; text-align: center; }
        
        .p-item { background: #f9fafb; padding: 20px; border-radius: 8px; border-left: 6px solid var(--blue); margin-bottom: 20px; }
        .vision-container { background: var(--light-blue); padding: 40px; border-radius: 15px; text-align: center; font-size: 1.1rem; font-weight: 700; margin-top: 50px; border: 2px dashed var(--blue); }
        
        #loading { display: none; text-align: center; padding: 80px 20px; }
        .spinner { border: 5px solid #f3f3f3; border-top: 5px solid var(--blue); border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>

<div class="wrap">
    <div class="input-card" id="input-ui">
        <h2 style="text-align:center; color: var(--blue); margin-bottom:25px;">Gemini 3 Pro ìƒê¸°ë¶€ ì„±ì¥ ë¶„ì„ê¸°</h2>
        <label>ğŸ”‘ API KEY</label>
        <input type="password" id="apiKey" placeholder="AIzaSy... (Gemini 3 ëª¨ë¸ ì§€ì› í‚¤)">
        
        <label>ğŸ‘¤ í•™ìƒ ê¸°ë³¸ ì •ë³´</label>
        <div style="display:flex; gap:10px;">
            <input type="text" id="name" placeholder="í•™ìƒ ì„±ëª…">
            <input type="text" id="major" placeholder="í¬ë§ ì§„ë¡œ/í•™ê³¼">
        </div>

        <label>ğŸ’¡ ìƒë‹´ ì¶”ê°€ ì •ë³´ & í‚¤ì›Œë“œ (ë³µêµ¬ë¨)</label>
        <textarea id="extraInfo" rows="4" placeholder="í•™ìƒì˜ ìµœê·¼ ê´€ì‹¬ì‚¬, ë³´ì™„ í•„ìš” ì , ê°•ì¡°í•˜ê³  ì‹¶ì€ í‚¤ì›Œë“œ ë“±ì„ ì…ë ¥í•˜ì„¸ìš”."></textarea>

        <div id="drop-zone" class="upload-zone">
            <div id="status-text">ğŸ“„ ìƒê¸°ë¶€ PDFë¥¼ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œí•˜ì„¸ìš”</div>
            <input type="file" id="file-input" accept=".pdf" style="display: none;">
        </div>
        <textarea id="rawText" style="display:none;"></textarea>
        
        <button class="btn-main" onclick="analyze()">ğŸ” ì „ë¬¸ ë³´ê³ ì„œ ì–‘ì‹ìœ¼ë¡œ ë¶„ì„ ë° ìƒì„±</button>
    </div>

    <div id="loading">
        <div class="spinner"></div>
        <p style="font-weight:700; color:var(--blue)">Gemini 3 Proê°€ í•™ìƒì˜ ì„œì‚¬ë¥¼ í•™ìˆ ì ìœ¼ë¡œ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</p>
    </div>

    <div id="report" class="report-view">
        <div class="report-header">
            <h1>í•™ìƒ ì„±ì¥ ë¶„ì„ ë° 3í•™ë…„ í™œë™ ë°©í–¥ ì œì–¸ ìµœì¢… ë³´ê³ ì„œ</h1>
        </div>

        <div style="display:grid; grid-template-columns:1fr 1fr; gap:15px; margin-bottom:30px; font-weight:600;">
            <div id="out-name">| 1. ê²€í†  ëŒ€ìƒ í•™ìƒ: </div>
            <div id="out-purpose">| 2. ê²€í†  ëª©ì : í•™ìƒì˜ ì—­ëŸ‰ ê·¹ëŒ€í™” ë° í•™ë¬¸ì  ì„±ì¥ ì™„ì„± ì œì–¸</div>
        </div>

        <div class="keyword-container">
            <div style="font-size:0.8rem; color:#64748b; margin-bottom:10px; font-weight:700;">CORE GROWTH KEYWORDS</div>
            <div id="out-keywords"></div>
        </div>

        <div class="section-title">| 3. 1í•™ë…„ ëŒ€ë¹„ 2í•™ë…„ ì£¼ìš” ì—­ëŸ‰ ì„±ì¥ ë¶„ì„</div>
        <table>
            <thead><tr><th style="width:18%">í‰ê°€ ì—­ëŸ‰</th><th>1í•™ë…„ (ê¸°ì´ˆ í˜•ì„±)</th><th>2í•™ë…„ (ì—­ëŸ‰ ì‹¬í™”)</th><th style="width:25%">ì£¼ìš” ì„±ì¥ ë‚´ìš© ë° íŠ¹ì§•</th></tr></thead>
            <tbody id="out-table"></tbody>
        </table>

        <div class="section-title">| 4. 3í•™ë…„ 'ë¸”ë£¨ì˜¤ì…˜' í™œë™ ë°©í–¥ ì œì–¸</div>
        <div id="out-projects"></div>

        <div class="section-title">| 5. ììœ¨Â·ì§„ë¡œÂ·ë™ì•„ë¦¬ ì‹¬í™” ë³´ì™„ ë° ê¸°ì¬ ì „ëµ</div>
        <div id="out-guides"></div>

        <div id="out-vision" class="vision-container"></div>
    </div>
</div>

<script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    const dropZone = document.getElementById('drop-zone');
    const fileInput = document.getElementById('file-input');

    dropZone.onclick = () => fileInput.click();
    fileInput.onchange = (e) => handleFile(e.target.files[0]);
    dropZone.ondragover = (e) => { e.preventDefault(); dropZone.style.background = "#eff6ff"; };
    dropZone.ondrop = async (e) => { e.preventDefault(); handleFile(e.dataTransfer.files[0]); };

    async function handleFile(file) {
        if (!file || file.type !== 'application/pdf') return;
        document.getElementById('status-text').innerText = "â³ ê³ í•´ìƒë„ í…ìŠ¤íŠ¸ ì¶”ì¶œ ì¤‘...";
        const pdf = await pdfjsLib.getDocument({data: await file.arrayBuffer()}).promise;
        let text = '';
        for (let i = 1; i <= pdf.numPages; i++) {
            const page = await pdf.getPage(i);
            text += (await page.getTextContent()).items.map(t => t.str).join(' ') + '\n';
        }
        document.getElementById('rawText').value = text;
        document.getElementById('status-text').innerText = `âœ… ${file.name} ë¶„ì„ ì¤€ë¹„ ì™„ë£Œ`;
    }

    async function analyze() {
        const key = document.getElementById('apiKey').value.trim();
        const text = document.getElementById('rawText').value.trim();
        const extra = document.getElementById('extraInfo').value.trim();
        if(!key || !text) return alert("í•„ìˆ˜ ë°ì´í„°ë¥¼ í™•ì¸í•˜ì„¸ìš”.");

        document.getElementById('loading').style.display = 'block';
        document.getElementById('input-ui').style.display = 'none';

        // Gemini 3 Pro-preview ëª¨ë¸ì„ ëª…ì‹œì ìœ¼ë¡œ í˜¸ì¶œ
        const prompt = `ë‹¹ì‹ ì€ ì…ì‹œ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì œê³µëœ í•™ìƒ ë°ì´í„°ì™€ ìƒë‹´ ì¶”ê°€ ì •ë³´ë¥¼ ë¶„ì„í•˜ì—¬ 3í•™ë…„ ì™„ê²° ë¡œë“œë§µì„ ì‘ì„±í•˜ì„¸ìš”.
        ë°˜ë“œì‹œ JSONìœ¼ë¡œë§Œ ì‘ë‹µí•˜ë©° ë‹¤ìŒ êµ¬ì¡°ë¥¼ ì§€í‚¤ì„¸ìš”: 
        {
          "keywords": ["í‚¤ì›Œë“œ1", "í‚¤ì›Œë“œ2", "í‚¤ì›Œë“œ3", "í‚¤ì›Œë“œ4", "í‚¤ì›Œë“œ5"],
          "table": [{"cat": "ì§„ë¡œì—­ëŸ‰", "g1": "...", "g2": "...", "growth": "..."}, {"cat": "í•™ì—…ì—­ëŸ‰", "g1": "...", "g2": "...", "growth": "..."}, {"cat": "ê³µë™ì²´ì—­ëŸ‰", "g1": "...", "g2": "...", "growth": "..."}, {"cat": "ì¸ì„±ì—­ëŸ‰", "g1": "...", "g2": "...", "growth": "..."}],
          "projects": [{"title": "...", "concept": "...", "steps": "...", "comp": "..."}],
          "guides": [{"cat": "ììœ¨í™œë™", "strategy": "...", "point": "...", "book": "..."}, {"cat": "ì§„ë¡œí™œë™", "strategy": "...", "point": "...", "book": "..."}, {"cat": "ë™ì•„ë¦¬í™œë™", "strategy": "...", "point": "...", "book": "..."}],
          "vision": "ìµœì¢… ì™„ì„± ëª¨ìŠµ ìš”ì•½"
        }
        [ìƒë‹´ ì¶”ê°€ ì •ë³´]: ${extra}
        [ë°ì´í„°]: ${text}`;

        try {
            // Gemini 3 Pro ëª¨ë¸ íƒ€ê²ŸíŒ…
            const resp = await fetch(`https://generativelanguage.googleapis.com/v1/models/gemini-3-pro-preview:generateContent?key=${key}`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    contents: [{parts: [{text: prompt}]}],
                    generationConfig: { response_mime_type: "application/json", temperature: 0.1 }
                })
            });

            const data = await resp.json();
            if (data.error) throw new Error(data.error.message);
            
            render(JSON.parse(data.candidates[0].content.parts[0].text));
        } catch (e) {
            alert(`ë¶„ì„ ì‹¤íŒ¨: ${e.message}`);
            document.getElementById('loading').style.display = 'none';
            document.getElementById('input-ui').style.display = 'block';
        }
    }

    function render(res) {
        document.getElementById('report').style.display = 'block';
        document.getElementById('loading').style.display = 'none';
        window.scrollTo(0, 0);

        document.getElementById('out-name').innerText = `| 1. ê²€í†  ëŒ€ìƒ í•™ìƒ: ${document.getElementById('name').value}`;
        document.getElementById('out-keywords').innerHTML = (res.keywords || []).map(k => `<span class="k-badge"># ${k}</span>`).join('');
        document.getElementById('out-table').innerHTML = (res.table || []).map(i => `
            <tr><th>${i.cat}</th><td>${i.g1}</td><td>${i.g2}</td><td><b>${i.growth}</b></td></tr>
        `).join('');

        document.getElementById('out-projects').innerHTML = (res.projects || []).map(p => `
            <div class="p-item">
                <h4 style="margin:0; color:var(--blue)">${p.title}</h4>
                <p style="font-size:0.85rem; color:#64748b; margin:8px 0;">${p.concept}</p>
                <div style="font-size:0.85rem;"><strong>ì‹¤í–‰ ë¡œë“œë§µ:</strong> ${p.steps}</div>
                <div style="font-size:0.85rem; color:var(--blue); margin-top:8px;">ğŸ¯ <strong>ê¸°ëŒ€ ì—­ëŸ‰:</strong> ${p.comp}</div>
            </div>
        `).join('');

        document.getElementById('out-guides').innerHTML = (res.guides || []).map(g => `
            <div style="margin-bottom:30px; padding-bottom:20px; border-bottom:1px solid #f1f5f9;">
                <h4 style="color:var(--blue); margin-bottom:12px;">[${g.cat} ì‹¬í™” ê°€ì´ë“œ]</h4>
                <p style="font-size:0.9rem; margin-bottom:8px;"><strong>ì‹¬í™” ì „ëµ:</strong> ${g.strategy}</p>
                <p style="font-size:0.85rem; background:#f9fafb; padding:15px; border-radius:8px; border-left:4px solid #94a3b8;">ğŸ’¡ <strong>ë³´ì™„ ë‚´ìš©:</strong> ${g.point}</p>
                <p style="font-size:0.85rem; color:var(--blue); font-weight:700;">ğŸ“š ì¶”ì²œ ì‹¬í™” ë„ì„œ: ${g.book}</p>
            </div>
        `).join('');

        document.getElementById('out-vision').innerText = `"${res.vision}"`;
    }
</script>
</body>
</html>
